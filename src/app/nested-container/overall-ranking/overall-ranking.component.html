<ngx-loading-bar color="#f86a34" height="5px" ref="http" ref="http"></ngx-loading-bar>
<div class="max-w-full h-auto bg-white rounded-md">
    <div class="block mx-auto text-center py-8">
    <span class="page-title">LEADERBOARD</span>
    </div>
    <div class="block mx-auto text-center">
        <mat-progress-bar [mode]="load_bar_mode" *ngIf="isLoading"></mat-progress-bar>
        <div class="grid grid-cols-1 justify-items-stretch md:mx-14 lg:mx-16 xl:mx-16 pb-10">
            <div *ngFor="let item of leaderboards_list; let i = index">
                <div class="max-w-full rounded-md ranking-container-bg my-1" [ngClass]="{ 'pb-5': item.isOpen }">
                    <div class="grid grid-cols-4 justify-items-stretch py-1 px-10">
                        <div class="justify-self-start col-span-2 content-center">
                            <span class="rank-no-text text-left text-md lg:text-3xl xl:text-4xl mr-2">
                                <span *ngIf="i == 0">1</span>
                                <span *ngIf="i == 1">2</span>
                                <span *ngIf="i == 2">3</span>
                                <span *ngIf="i == 3">&nbsp;&nbsp;</span>
                                <span *ngIf="i == 4">4</span>
                                <span *ngIf="i == 5">5</span>
                                <span *ngIf="i == 6">6</span>
                                <span *ngIf="i == 7">7</span>
                                <span *ngIf="i == 8">8</span>
                                <span *ngIf="i == 9">&nbsp;&nbsp;</span>
                                <span *ngIf="i == 10">9</span>
                                <span *ngIf="i == 11">10</span>
                                <span *ngIf="i == 12">11</span>
                                <span *ngIf="i == 13">12</span>
                                <span *ngIf="i == 14">13</span>
                                <span *ngIf="i == 15">&nbsp;&nbsp;&nbsp;</span>
                                <span *ngIf="i == 16">14</span>
                                <span *ngIf="i == 17">15</span>
                                <span *ngIf="i == 18">16</span>
                                <span *ngIf="i == 19">17</span>
                                <span *ngIf="i == 20">18</span>
                                <span *ngIf="i == 21">19</span>
                                <span *ngIf="i == 22">20</span>
                                <span *ngIf="i == 23">21</span>
                                <span *ngIf="i == 24">22</span>
                                <span *ngIf="i == 25">23</span>
                                <span *ngIf="i == 26">24</span>
                                <span *ngIf="i == 27">25</span>
                                <span *ngIf="i == 28">26</span>
                                <span *ngIf="i == 29">27</span>
                                <span *ngIf="i == 30">28</span>
                                <span *ngIf="i == 31">29</span>
                                <span *ngIf="i == 32">30</span>
                                <span *ngIf="i == 33">31</span>
                                <span *ngIf="i == 34">&nbsp;&nbsp;&nbsp;</span>
                                <span *ngIf="i == 35">32</span>
                                <span *ngIf="i == 36">33</span>
                                <span *ngIf="i == 37">34</span>
                                <span *ngIf="i == 38">35</span>
                                <span *ngIf="i == 39">36</span>
                                <span *ngIf="i == 40">37</span>
                            </span>
                            <span class="rank-municipality-text text-md text-left lg:text-3xl xl:text-4xl mx-2">
                                {{ item.municipality_name }}
                            </span>
                        </div>
                        <div class="content-center block lg:hidden xl:hidden">
                            <span class="rank-no-text text-2xl lg:text-3xl xl:text-3xl mx-2">
                                {{ item.total | number }}
                            </span>
                        </div>
                        <div class="content-center block lg:hidden xl:hidden">
                            <button mat-icon-button aria-label="Example icon button with a vertical three dot icon" class="rank-no-text mx-2" (click)="toggleCollapse(item,i)">
                                <mat-icon *ngIf="!item.isOpen">arrow_drop_down</mat-icon>
                                <mat-icon *ngIf="item.isOpen">arrow_drop_up</mat-icon>
                            </button>
                        </div>
                        <div class="justify-self-end col-span-2 content-center hidden lg:block xl:block">
                            <span class="rank-no-text text-2xl lg:text-3xl xl:text-3xl mx-2">
                                {{ item.total | number }}
                            </span>
                            <button mat-icon-button aria-label="Example icon button with a vertical three dot icon" class="rank-no-text mx-2" (click)="toggleCollapse(item,i)">
                                <mat-icon *ngIf="!item.isOpen">arrow_drop_down</mat-icon>
                                <mat-icon *ngIf="item.isOpen">arrow_drop_up</mat-icon>
                            </button>
                        </div>
                    </div>

                    <div class="max-w-full rounded-md ranking-container-bg mx-20" *ngIf="item.isOpen">
                        <mat-progress-bar [mode]="load_bar_mode" *ngIf="contestResultsLoading"></mat-progress-bar>
                        <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3" *ngIf="!contestResultsLoading">
                            <div *ngFor="let c of contest_municipality_results; let i = index">
                                <div class="grid grid-cols-6">
                                    <div class="text-base justify-self-start col-span-5 text-left">
                                        <span class="contest-text">{{ c.contest_name }}</span>
                                    </div>
                                    <div class="text-base justify-self-end">
                                        <span class="contest-score-text">{{ c.score }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
